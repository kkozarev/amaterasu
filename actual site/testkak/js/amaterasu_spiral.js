var chart = spiralSegmentChart()
    .segmentHeight(12)
    .innerRadius(40)
    .numSegments(12)
    .yearLabels(["1998", "1999", "2000", "2001", "2002", "2003", "2004","2005", "2006", "2007", "2008", "2009","2010", "2011", "2012", "2013"])
    .monthLabels(["January","February","March","April","May","June","July","August","September","October","November","December"])
    .margin({top: 100, right: 0, bottom: 100, left: 220});

var energyData = [
    0.176042,0.96146,0.76414,0.334734,0.32583,0.135422,0.60884,0.768601,0.230771,0.7572,0.210855,0.90938,
    0.94296,0.290368,0.093755,0.099166,0.429278,0.962314,0.43833,0.244464,0.550621,0.173093,0.103659,0.773,
    0.173093,0.103659,0.0773,0.265913,0.99811,0.076164,0.3154,0.146557,0.108531,0.421608,0.120872,0.9789,
    0.061825,0.101988,0.095364,0.365022,0.96741,0.095962,0.06409,0.300409,0.102083,0.134949,0.535842,0.224584,
    0.227262,0.28274,0.11842,0.062601,0.173093,0.103659,0.0773,0.103968,0.088054,0.069683,0.141973,0.106082,
    0.135513,0.09906,0.099516,0.31927,0.97133,0.08595,0.067532,0.096042,0.059053,0.11167,0.137408,0.109005,
    0.365752,0.179085,0.135975,0.199275,0.44186,0.053961,0.173093,0.103659,0.0773,0.088226,0.09218,0.059777,
    0.125663,0.136192,0.121279,0.146825,0.267907,0.113706,0.09266,0.105833,0.130221,0.09695,0.078355,0.067088,
    0.3888,0.96131,0.152373,0.072957,0.95516,0.091731,0.14403,0.113989,0.089659,0.173093,0.103659,0.0773,
    0.9808,0.85082,0.057542,0.09864,0.91152,0.066592,0.20529,0.12785,0.077798,0.071004,0.094316,0.088963,
    0.54368,0.091964,0.095114,0.071649,0.76153,0.150208,0.15751,0.065801,0.087791,0.100653,0.121987,0.161462,
    0.173093,0.103659,0.0773,0.096507,0.093314,0.075191,0.07723,0.091846,0.095587,0.053434,1.017331,1.458327,
    0.120566,0.107582,0.139082,0.112224,0.159757,0.252278,0.161521,0.124628,0.080985,0.634034,0.248268,0.20864,
    0.14324,0.174345,0.165649,0.173093,0.103659,0.0773,0.096507,0.093314,0.075191,0.07723,0.091846,0.095587,
    0.053434,1.017331,1.458327,0.120566,0.107582,0.139082,0.112224,0.159757,0.252278,0.161521,0.124628,0.080985,
    0.634034,0.248268,0.20864,0.14324,0.174345,0.165649,0.173093,0.103659,0.0773,0.096507,0.093314,0.161521
   ];
var numMonths=chart.numMonths();
var numYears=chart.numYears();
var months=chart.monthLabels();
var years=chart.yearLabels();
var data = [];
var i;
for(var yy=0; yy<numYears; yy++) {
    for(var mm=0; mm<numMonths; mm++) {
	i = yy*numYears+mm;
	//data[i] = {title:  months[mm]+", "+years[yy], value: energyData[i]};
	//data[i] = months[mm]+", "+years[yy];
	data[i] = 10;
    }
}


d3.select('#spiralchart')
    .selectAll('svg')
    .data([energyData])
    .enter()
    .append('svg')
    .call(chart);

/* Add a mouseover event */
var originalColor;
var currentColor;
d3.selectAll("#spiralchart path")
    .on('mouseover', function() {
	var d = d3.select(this).data()[0];
	//d3.select("#info").text(d.title+': '+d.value);
	d3.select("#info").text('Segment value: '+d);
	originalColor = d3.select(this).style('fill');
	d3.select(this).style('fill','white');})
    .on('mouseout', function() {
	d3.select("#info").text('');
	currentColor == "white" ? originalColor : "blue";
	d3.select(this).style('fill',currentColor);});
//    .on('click',function(){
//	currentColor = currentColor == "white" ? origCol : "blue";
 //       d3.select(this).style("fill", currentColor);
 //   });
